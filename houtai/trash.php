<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\162\141\163\x68"; parent::__construct(); } protected function postDelete($request_data) { goto HtCbQ; HtCbQ: $error = array(); goto M5JN7; q2Xp7: GB3vA: goto K2vWj; Eu2QS: IqAFQ: goto A3zIz; iPZke: $this->db->beginTransaction(); goto RLXLK; PIzrg: $this->db->rollBack(); goto umX9B; U8Vhy: return $this->success(); goto Eu2QS; RLXLK: foreach ($ids as $id) { goto q4ra7; f22GH: if ($this->db->delete($this->table, array("\151\x64", "\75", $id))->is()) { goto LqcMX; } goto SxDoB; wdGxH: goto b99WM; goto uDl3o; rVNjB: $this->_rmdir("\56\x2e\x2f" . $path); goto oVo3o; jmH4_: b99WM: goto A2rF9; A2rF9: W4mjP: goto agR9A; wC2_U: $path = $trash["\160\x61\164\150"]; goto f22GH; uDl3o: LqcMX: goto ZiL2e; SxDoB: $error[] = $trash["\x74\151\164\154\145"]; goto wdGxH; ZiL2e: if (!($path && count(explode("\x2f", $path)) >= 2)) { goto GwVUS; } goto rVNjB; oVo3o: GwVUS: goto jmH4_; q4ra7: $trash = $this->db->select($this->table)->where(array("\151\144", "\x3d", $id))->get(); goto wC2_U; agR9A: } goto q2Xp7; umX9B: return $this->error(); goto pVVoj; K2vWj: if (count($error) === 0) { goto pO8dD; } goto PIzrg; Dn2cZ: pO8dD: goto tXdAp; pVVoj: goto IqAFQ; goto Dn2cZ; zIbJf: $this->_log("\x64\145\x6c\145\164\145", array("\x74\x69\x74\154\x65" => count($ids))); goto U8Vhy; tXdAp: $this->db->commit(); goto zIbJf; M5JN7: $ids = $request_data["\151\144"]; goto iPZke; A3zIz: } protected function postReplay($request_data) { goto bTBL_; pO6j5: $this->_log("\162\x65\160\x6c\171", array("\x74\x69\164\154\x65" => count($ids))); goto FOhmO; OQFEA: foreach ($ids as $id) { goto dmHON; a5_H_: od0cT: goto flhO9; flhO9: $error[] = $trash["\164\151\164\154\x65"]; goto rHRIk; Fr2_E: $table = $trash["\x74\141\142\154\145"]; goto bBH41; dmHON: $trash = $this->db->select($this->table)->where(array("\151\144", "\75", $id))->get(); goto Fr2_E; r8E9H: Q3IVi: goto BHcri; rHRIk: X2tzB: goto r8E9H; BqoIC: goto X2tzB; goto a5_H_; EoYIb: if ($isadd === false) { goto od0cT; } goto HIDbk; bBH41: $isadd = $this->db->insert($table, json_decode($trash["\x64\141\164\x61"], true)); goto EoYIb; HIDbk: $this->db->delete($this->table, array("\x69\x64", "\75", $id)); goto BqoIC; BHcri: } goto HgT3K; bTBL_: $error = array(); goto JDpHm; RgVzx: return $this->error(); goto DozRs; Z3H86: kHoZt: goto nk3S7; nk3S7: $this->db->commit(); goto pO6j5; HgT3K: p4dbw: goto QnHUK; DozRs: goto NlyD0; goto Z3H86; H2tng: $this->db->beginTransaction(); goto OQFEA; FOhmO: return $this->success(); goto JcGBe; JDpHm: $ids = $request_data["\x69\x64"]; goto H2tng; QnHUK: if (count($error) === 0) { goto kHoZt; } goto D8fsN; JcGBe: NlyD0: goto LfI9P; D8fsN: $this->db->rollBack(); goto RgVzx; LfI9P: } }
